{% for module in apache_modules %}
LoadModule {{module.name}} {{module.path}}
{% endfor %}
ServerRoot {{apache_server_root}}
WSGISocketPrefix /var/run/wsgi

<VirtualHost 0.0.0.0:80>
    ServerName {{ckan_server_name}}
    ServerAlias {{ckan_server_alias}}
    WSGIScriptAlias / {{ckan_config_dir}}/apache.wsgi

    # Pass authorization info on (needed for rest api).
    WSGIPassAuthorization On

    # Deploy as a daemon (avoids conflicts between CKAN instances).
    WSGIDaemonProcess ckan_default user={{ckan_user}} group={{ckan_group}} display-name=ckan_default processes=2 threads=15 

    WSGIProcessGroup ckan_default

    ErrorLog /var/log/httpd/ckan_default.error.log
    CustomLog /var/log/httpd/ckan_default.custom.log combined
</VirtualHost>
